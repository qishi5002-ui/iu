<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>XeinStore - Game Keys</title>
<style>
body{font-family:Roboto,sans-serif;margin:0;background:#f2f2f2;color:#111;}
header{background:#ff3b30;color:#fff;padding:20px;text-align:center;}
nav{display:flex;justify-content:flex-start;align-items:center;padding:10px;}
nav button{margin-right:10px;padding:5px 10px;border:none;border-radius:5px;cursor:pointer;background:#ff9800;color:#fff;font-weight:bold;}
.container{max-width:950px;margin:20px auto;padding:20px;}
.products{display:flex;flex-wrap:wrap;justify-content:center;gap:20px;margin-top:20px;}
.product{background:#fff;border-radius:10px;padding:20px;width:200px;text-align:center;box-shadow:0 6px 12px rgba(0,0,0,0.1);cursor:pointer;transition:transform 0.2s;}
.product:hover{transform:translateY(-5px);}
.product h3{color:#ff3b30;font-size:18px;margin-bottom:10px;}
.product button{background:linear-gradient(90deg,#ff3b30,#ff7530);border:none;padding:10px 15px;color:#fff;cursor:pointer;border-radius:5px;font-weight:bold;}
.note{background:#ffeb3b;color:#111;text-align:center;padding:12px;font-weight:bold;margin-top:10px;}
.checkout{display:none;}
.checkout input{width:100%;padding:10px;margin:10px 0;border-radius:5px;border:1px solid #ccc;}
.checkout button{width:100%;padding:12px;background:linear-gradient(90deg,#ff3b30,#ff7530);border:none;color:#fff;font-size:16px;border-radius:5px;cursor:pointer;font-weight:bold;}
.keyOption{padding:10px 15px;border-radius:5px;border:1px solid #ccc;background:#fff;cursor:pointer;user-select:none;}
.keyOption.selected{border:2px solid #ff3b30;background:#ffe6e0;}
</style>
</head>
<body>

<header><h1>XeinStore - Game Keys</h1></header>

<nav>
<button onclick="showPage('home')">Home</button>
<button onclick="showPage('track')">Track Order</button>
<button onclick="adminLoginPrompt()">Admin Login</button>
</nav>

<div class="container">

<!-- HOME PAGE -->
<div id="homePage">
<div class="note">NOTE: Please remember to screenshot your crypto payments and receipt.</div>
<div class="products">
<div class="product">
<h3>Delta Keys</h3>
<button onclick="buyProduct('Delta Keys')">Buy Now</button>
</div>
<div class="product">
<h3>PUBG Keys</h3>
<button onclick="buyProduct('PUBG Keys')">Buy Now</button>
</div>
</div>
</div>

<!-- CHECKOUT SECTION -->
<div class="checkout" id="checkoutSection">
<h2>Checkout</h2>
<p id="selected-product"></p>
<input type="text" id="telegram" placeholder="Enter your Telegram username" required>
<div id="keyOptions" style="display:flex;flex-wrap:wrap;gap:10px;margin:10px 0;"></div>
<p id="priceDisplay" style="font-weight:bold;color:#ff3b30;"></p>
<button onclick="proceedPayment()">Checkout</button>
</div>
<!-- PAYMENT PAGE -->
<div class="paymentSection" id="paymentSection" style="display:none;">
<h2>Payment Details</h2>
<div class="wallet-box">
<p id="walletAddress"></p>
<p>Network: TRC-20</p>
<p id="paymentPrice"></p>
<button onclick="copyWallet()">Copy</button>
</div>
<button onclick="markPaid()">I've Paid</button>
</div>

<!-- RECEIPT PAGE -->
<div class="receiptSection" id="receiptSection" style="display:none;">
<h2>Order Receipt</h2>
<div id="receiptBox"></div>
</div>

<!-- ADMIN PAGE -->
<div class="adminSection" id="adminSection" style="display:none;">
<h2>Admin Panel</h2>
<div>
<button class="filterBtn" onclick="filterOrders('All')">All</button>
<button class="filterBtn" onclick="filterOrders('Pending')">Pending</button>
<button class="filterBtn" onclick="filterOrders('Delivered')">Delivered</button>
<button class="filterBtn" onclick="filterOrders('Cancelled')">Cancelled</button>
</div>
<p id="totals"></p>
<table>
<thead>
<tr>
<th>Order ID</th>
<th>Product</th>
<th>Duration</th>
<th>Telegram</th>
<th>Price</th>
<th>Status</th>
<th>Date</th>
<th>Actions</th>
</tr>
</thead>
<tbody id="ordersTable"></tbody>
</table>
</div>

</div> <!-- end container -->

<div id="recentPurchase"></div>

<script>
/* Products Data */
const productsData={
"Delta Keys":[{duration:"1 day",price:5},{duration:"3 days",price:8},{duration:"7 days",price:12},{duration:"14 days",price:17},{duration:"30 days",price:23}],
"PUBG Keys":[{duration:"1 day",price:4},{duration:"3 days",price:7},{duration:"7 days",price:11},{duration:"30 days",price:22}]
};
const profitMap={"Delta Keys":{"1 day":2,"3 days":3,"7 days":3,"14 days":4,"30 days":5},"PUBG Keys":{"1 day":2,"3 days":3,"7 days":4,"30 days":7}};

/* Current Page Flow */
let selectedProduct='';
let selectedIndex=0;
let lastOrder=null;

/* Show/Hide Pages */
function showPage(page){
document.getElementById('homePage').style.display='none';
document.getElementById('checkoutSection').style.display='none';
document.getElementById('paymentSection').style.display='none';
document.getElementById('receiptSection').style.display='none';
document.getElementById('adminSection').style.display='none';
if(page==='home') document.getElementById('homePage').style.display='block';
if(page==='checkout') document.getElementById('checkoutSection').style.display='block';
if(page==='payment') document.getElementById('paymentSection').style.display='block';
if(page==='receipt') document.getElementById('receiptSection').style.display='block';
if(page==='admin') document.getElementById('adminSection').style.display='block';
}

/* BUY PRODUCT */
function buyProduct(productName){
selectedProduct = productName;
document.getElementById('selected-product').innerText = 'You are buying: ' + productName;
const keyOptions = document.getElementById('keyOptions');
keyOptions.innerHTML = '';
productsData[productName].forEach((item,index)=>{
const btn = document.createElement('div');
btn.className='keyOption';
btn.innerText=`ðŸ”‘ ${item.duration} - $${item.price}`;
btn.onclick = ()=> selectKeyOption(index);
keyOptions.appendChild(btn);
});
// select first option by default
selectKeyOption(0);
showPage('checkout');
}

/* SELECT KEY OPTION */
function selectKeyOption(index){
selectedIndex=index;
const buttons = document.getElementById('keyOptions').children;
for(let i=0;i<buttons.length;i++){
buttons[i].classList.toggle('selected', i===index);
}
document.getElementById('priceDisplay').innerText=`Price: $${productsData[selectedProduct][selectedIndex].price} USDT`;
}

/* PROCEED PAYMENT */
function proceedPayment(){
const telegram=document.getElementById('telegram').value.trim();
if(!telegram){alert('Please enter your Telegram username');return;}
const selectedItem = productsData[selectedProduct][selectedIndex];
const orderId = 'ORD' + Math.floor(Math.random()*1000000);
const order={id:orderId,product:selectedProduct,duration:selectedItem.duration,telegram,price:selectedItem.price,status:'Pending',date:new Date().toLocaleString()};
localStorage.setItem('lastOrder',JSON.stringify(order));
showPaymentPage();
}

/* SHOW PAYMENT */
function showPaymentPage(){
document.getElementById('checkoutSection').style.display='none';
lastOrder = JSON.parse(localStorage.getItem('lastOrder'));
document.getElementById('walletAddress').innerText='Wallet Address: TEwKbkNdXqvNUG951nYTCRF6UjLGBn7pqc';
document.getElementById('paymentPrice').innerText=`Price: $${lastOrder.price} USDT`;
showPage('payment');
}

/* COPY WALLET */
function copyWallet(){navigator.clipboard.writeText('TEwKbkNdXqvNUG951nYTCRF6UjLGBn7pqc');alert('Wallet copied!');}

/* MARK PAID */
function markPaid(){
let orders=JSON.parse(localStorage.getItem('orders'))||[];
orders.push(lastOrder);
localStorage.setItem('orders', JSON.stringify(orders));
localStorage.removeItem('lastOrder');
showReceipt();
}

/* SHOW RECEIPT */
function showReceipt(){
document.getElementById('paymentSection').style.display='none';
const orders=JSON.parse(localStorage.getItem('orders'))||[];
if(orders.length===0){alert('No order found');showPage('home'); return;}
const order=orders[orders.length-1];
const box=document.getElementById('receiptBox');
box.innerHTML=`
<p><strong>Order ID:</strong> ${order.id}</p>
<p><strong>Product:</strong> ${order.product} - ${order.duration}</p>
<p><strong>Telegram:</strong> ${order.telegram}</p>
<p><strong>Price:</strong> $${order.price} USDT</p>
<p><strong>Status:</strong> <span class="status-Pending">${order.status}</span></p>
<p><strong>Date:</strong> ${order.date}</p>
<div class="note">
NOTE: Send BOTH screenshots of crypto payment and receipt to <a href="https://t.me/cocomelonqueen" target="_blank">@cocomelonqueen</a> on Telegram.
</div>`;
showPage('receipt');
}

/* ADMIN LOGIN */
function adminLoginPrompt(){
const pass = prompt('Enter Admin Password:');
if(pass==='80256348$'){showAdmin();}
else{alert('Wrong password');}
}

/* SHOW ADMIN PANEL */
function showAdmin(){
showPage('admin');
renderAdminOrders();
}

/* ADMIN ORDERS MANAGEMENT */
function renderAdminOrders(){
let orders=JSON.parse(localStorage.getItem('orders'))||[];
const tbody=document.getElementById('ordersTable');
tbody.innerHTML='';
if(orders.length===0){tbody.innerHTML='<tr><td colspan="8" style="text-align:center;">No orders found</td></tr>';}
orders.forEach((o,i)=>{
const tr=document.createElement('tr');
tr.innerHTML=`
<td>${o.id}</td>
<td>${o.product}</td>
<td>${o.duration}</td>
<td>${o.telegram}</td>
<td>$${o.price}</td>
<td><span class="status-${o.status}">${o.status}</span></td>
<td>${o.date}</td>
<td>
<button class="statusBtn" onclick="changeStatus(${i},'Pending')">Pending</button>
<button class="statusBtn" onclick="changeStatus(${i},'Delivered')">Delivered</button>
<button class="statusBtn" onclick="changeStatus(${i},'Cancelled')">Cancelled</button>
<button class="deleteBtn" onclick="deleteOrder(${i})">Delete</button>
</td>`;
tbody.appendChild(tr);
});
updateTotals();
}

function changeStatus(index,status){
let orders=JSON.parse(localStorage.getItem('orders'))||[];
orders[index].status=status;
localStorage.setItem('orders', JSON.stringify(orders));
renderAdminOrders();
}

function deleteOrder(index){
if(confirm('Are you sure to delete this order?')){
let orders=JSON.parse(localStorage.getItem('orders'))||[];
orders.splice(index,1);
localStorage.setItem('orders', JSON.stringify(orders));
renderAdminOrders();
}
}

function filterOrders(status){
let orders=JSON.parse(localStorage.getItem('orders'))||[];
if(status==='All') renderAdminOrders();
else{
const filtered=orders.filter(o=>o.status===status);
const tbody=document.getElementById('ordersTable');
tbody.innerHTML='';
if(filtered.length===0){tbody.innerHTML='<tr><td colspan="8" style="text-align:center;">No orders found</td></tr>';}
filtered.forEach((o,i)=>{
const tr=document.createElement('tr');
tr.innerHTML=`
<td>${o.id}</td>
<td>${o.product}</td>
<td>${o.duration}</td>
<td>${o.telegram}</td>
<td>$${o.price}</td>
<td><span class="status-${o.status}">${o.status}</span></td>
<td>${o.date}</td>
<td>
<button class="statusBtn" onclick="changeStatus(${i},'Pending')">Pending</button>
<button class="statusBtn" onclick="changeStatus(${i},'Delivered')">Delivered</button>
<button class="statusBtn" onclick="changeStatus(${i},'Cancelled')">Cancelled</button>
<button class="deleteBtn" onclick="deleteOrder(${i})">Delete</button>
</td>`;
tbody.appendChild(tr);
});
updateTotals();
}

function updateTotals(){
let orders=JSON.parse(localStorage.getItem('orders'))||[];
let totalOrders=orders.length;
let delivered=orders.filter(o=>o.status==='Delivered').length;
let profit=0;
orders.forEach(o=>{if(o.status==='Delivered') profit+=profitMap[o.product][o.duration];});
document.getElementById('totals').innerText=`Total Orders: ${totalOrders} | Delivered: ${delivered} | Total Profit: $${profit}`;
}

/* FAKE RECENT PURCHASE TICKER */
const tickerProducts=["Delta Keys","PUBG Keys"];
function randomUsername(){const chars="abcdefghijklmnopqrstuvwxyz0123456789";let name="";for(let i=0;i<6;i++){name+=chars.charAt(Math.floor(Math.random()*chars.length));}return name;}
function showFakePurchase(){
const user=randomUsername();
const censored=user.substring(0,3)+"***";
const product=tickerProducts[Math.floor(Math.random()*tickerProducts.length)];
const times=["a few minutes ago","5 minutes ago","1 hour ago","2 hours ago"];
const time=times[Math.floor(Math.random()*times.length)];
const ticker=document.getElementById('recentPurchase');
ticker.innerText=`${censored} bought ${product} ${time}`;
setTimeout(()=>{ticker.innerText="";},5000);
}
setInterval(showFakePurchase,8000);

/* INITIAL PAGE */
showPage('home');
</script>

</body>
</html>
